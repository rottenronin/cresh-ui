import{d as C,A as b,E as A,l as N,m as R,J as y,o as d,c,x as k,s as f,v as I,n as E,q as V,_ as v,b as S,t as x,F as B,j as D,D as L,K as F,e as m,I as H}from"./index-50829d1b.js";const j=C({__name:"CTab",props:{name:{type:String,required:!0},identifier:{type:String,required:!0},icon:{type:String,required:!1,default:""},disabled:{type:Boolean,required:!1,default:!1},visible:{type:Boolean,required:!1,default:!1},hide:{type:Boolean,required:!1,default:!1}},setup(l){const o=l,i=b(o.visible),s=b(A("selected-tab-item")),n=N(),g=R(()=>!!n.icon),u=A("tab-update");return y(()=>o.visible,r=>{i.value=r}),y(()=>s.value,r=>{i.value=(r==null?void 0:r.id)===o.identifier}),y(()=>o.hide,(r,p)=>{r!==p&&(u==null||u(o.identifier))}),(r,p)=>(d(),c("div",{class:I(["c-tab",{disabled:l.disabled}])},[g.value?k(r.$slots,"icon",{key:0}):f("",!0),i.value?k(r.$slots,"default",{key:1}):f("",!0)],2))}}),J={class:"text"},K=C({__name:"TabHeaderItem",props:{tab:{}},emits:["ready"],setup(l,{emit:o}){return E(()=>{o("ready")}),(i,s)=>(d(),c(B,null,[i.tab.props.icon?(d(),V(v,{key:0,name:i.tab.props.icon,width:16,height:16,color:i.tab.props.disabled?"#ababab":"secondary"},null,8,["name","color"])):f("",!0),S("span",J,x(i.tab.props.name),1)],64))}}),M={class:"text"},U=["onClick"],P=C({__name:"CTabs",props:{readonly:{type:Boolean,required:!1,default:!1},selectedId:{type:String,required:!1,default:""},hasButton:{type:Boolean,required:!1,default:!1},buttonLabel:{type:String,required:!1,default:""},buttonIconName:{type:String,required:!1,default:"add"},buttonColor:{type:String,required:!1,default:"#212121"}},emits:["tab-change","button-click"],setup(l,{emit:o}){const i=l,s=D({tabs:[],isScrollable:!1}),n=b(void 0);function g(t){return s.tabs.findIndex(e=>e.props.identifier===t)}y(()=>i.selectedId,(t,e)=>{if(t&&t!==e){const a=g(t);if(a<=-1)return;n.value={id:s.tabs[a].props.identifier,name:s.tabs[a].props.name},s.selectedIdentifier=i.selectedId}});const u=N(),r=R(()=>u.default),p=t=>{t&&Array.isArray(t)&&t.forEach(e=>{e.type===j||e.type.__name==="CTab"?(s.tabs.push(e),i.selectedId&&e.props.identifier===i.selectedId&&(n.value={id:e.props.identifier,name:e.props.name},s.selectedIdentifier=e.props.identifier)):e.children&&Array.isArray(e.children)&&e.children.length>0&&p(e.children)})};function q(t){if(i.readonly||n.value&&n.value.id===t)return;const e=s.tabs.find(a=>a.props.identifier===t);e!=null&&e.props.disabled||(n.value={id:e==null?void 0:e.props.identifier,name:e==null?void 0:e.props.name},s.selectedIdentifier=e==null?void 0:e.props.identifier,o("tab-change",n))}function W(){o("button-click")}const h=b(null),w=b(0);function T(t){const a=h.value;if(a)switch(t){case"left":a.scrollBy(-60,0);break;default:a.scrollBy(60,0);break}}function $(){const t=h.value;t&&(s.isScrollable=t.scrollWidth>t.offsetWidth)}function z(){w.value+=1;const t=h.value;s.tabs.length===w.value&&t&&(s.isScrollable=t.scrollWidth>t.offsetWidth)}function _(){s.tabs=[...s.tabs];for(let t=0;t<s.tabs.length;t++)if(!s.tabs[t].props.hide){q(s.tabs[t].props.identifier);break}}return L("tab-update",t=>{const e=s.tabs.find(a=>a.props.identifier===t);e&&(e.props.hide=!e.props.hide),_()}),E(()=>{window.addEventListener("resize",()=>{$()});const t=r.value?r.value():void 0;p(t),!n.value&&s.tabs.length>0&&(n.value={id:s.tabs[0].props.identifier,name:s.tabs[0].props.name},s.selectedIdentifier=s.tabs[0].props.identifier),_()}),F(()=>{window.removeEventListener("resize",()=>{$()})}),L("selected-tab-item",n),(t,e)=>(d(),c("div",{class:I(["c-tabs",{readonly:l.readonly}]),id:"tabs-container",ref:"tabRef"},[S("div",{class:"c-tabs-headers",id:"header",ref_key:"headerRef",ref:h},[s.isScrollable?(d(),c("div",{key:0,class:"scroll-left scroll-button",onClick:e[0]||(e[0]=a=>T("left"))},[m(v,{name:"triangle-left",color:"white"})])):f("",!0),l.hasButton?(d(),c("div",{key:1,style:{marginLeft:0},class:"c-tabs-header-btn tab-button",onClick:W},[m(v,{name:l.buttonIconName,width:16,height:16,color:l.buttonColor},null,8,["name","color"]),S("span",M,x(l.buttonLabel),1)])):f("",!0),(d(!0),c(B,null,H(s.tabs,(a,O)=>(d(),c(B,{key:`c-tab-${O}`},[a.props.hide?f("",!0):(d(),c("div",{key:0,class:I(["c-tabs-header-btn",{selected:s.selectedIdentifier===a.props.identifier,disabled:a.props.disabled}]),onClick:()=>q(a.props.identifier)},[m(K,{tab:a,onReady:e[1]||(e[1]=()=>z())},null,8,["tab"])],10,U))],64))),128)),s.isScrollable?(d(),c("div",{key:2,class:"scroll-right scroll-button",onClick:e[2]||(e[2]=a=>T("right"))},[m(v,{name:"triangle-right",color:"white"})])):f("",!0)],512),k(t.$slots,"default",{tab:n.value})],2))}});export{j as _,P as a};

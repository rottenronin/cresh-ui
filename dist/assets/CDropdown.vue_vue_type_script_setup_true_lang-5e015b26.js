import{d as P,A as m,l as U,m as v,R as W,K as j,n as z,J as G,o as a,c as r,b as M,x as w,s as f,F as C,g as y,H as p,q,u as x,G as J,Z as K,P as D,I as X,v as b,t as Y}from"./index-50829d1b.js";const Z=["onClick"],Q={key:0,class:"content"},_=["onClick"],te=P({__name:"CDropdown",props:{items:{type:Array,required:!1,default:()=>[]},modelValue:{type:Boolean,required:!0,default:!1},hovered:{type:Boolean,required:!1,default:!1},showIcon:{type:Boolean,required:!1,default:()=>!0},preSelectedItem:{type:Object,required:!1,default:null}},emits:["update:modelValue","select"],setup(n,{emit:u}){const o=n,g=m(0),k=m(0),V=m(0),h=U(),I=v(()=>o.items?o.items[g.value]:null),i=m(null),c=m(null);W(()=>{if(o.preSelectedItem&&o.items){const e=o.items.findIndex(t=>t.key===o.preSelectedItem.key);e>-1&&(g.value=e)}});const R=()=>{k.value&&clearTimeout(k.value),k.value=window.setTimeout(()=>{o.modelValue||u("update:modelValue",!0)},100)},E=e=>{if(!i.value||!c.value)return;const t=i.value,l=c.value.getBoundingClientRect(),d=t.getBoundingClientRect(),T=e.clientX;if(T<l.left||T>=l.right){u("update:modelValue",!1);return}const $=e.clientY;($<d.top||$>=l.bottom)&&u("update:modelValue",!1)},B=e=>{V.value&&clearTimeout(V.value),V.value=window.setTimeout(()=>{E(e)},100)},A=()=>{if(!i.value||!c.value)return;const e=i.value,t=c.value;if(!t||!e)return;const s=t.getBoundingClientRect(),l=e.getBoundingClientRect();if(t.style.left="unset",t.style.top="100%",s.width+l.x>window.innerWidth){const d=s.width+l.x-window.innerWidth;s.x>d+10&&(t.style.right="0")}if(s.height+l.y>window.innerHeight){const d=s.height+l.height;s.y>d&&(t.style.top=`-${d}px`)}};j(()=>{o.hovered&&i.value&&i.value.removeEventListener("mouseenter",R)}),z(()=>{o.hovered&&i.value&&i.value.addEventListener("mouseenter",R)}),G(()=>o.modelValue,(e,t)=>{e!==t&&(e?(document.addEventListener("mousedown",E),o.hovered&&document.addEventListener("mousemove",B),setTimeout(()=>{A()},200)):(document.removeEventListener("mousedown",E),o.hovered&&document.removeEventListener("mousemove",B)))});const H=()=>{o.hovered||u("update:modelValue",!o.modelValue)},O=(e,t)=>{u("select",e),u("update:modelValue",!1),g.value=t},F=v(()=>!!h.default),S=v(()=>!!h["unactive-icon"]),L=v(()=>!!h["active-icon"]),N=v(()=>!!h.content);return(e,t)=>(a(),r("div",{class:b(["c-dropdown",{active:n.modelValue,selected:!!I.value}])},[M("div",{ref_key:"triggerRef",ref:i,class:"dropdown-trigger",onClick:D(H,["prevent","stop"])},[F.value?(a(),r("div",Q,[w(e.$slots,"default",{selectedItem:I.value})])):f("",!0),n.showIcon?(a(),r(C,{key:1},[S.value&&!n.modelValue?w(e.$slots,"unactive-icon",{key:0}):S.value?f("",!0):y((a(),q(x(J),{key:1,class:"unactive-icon",color:"primary",name:"chevron-down"},null,512)),[[p,!n.modelValue]]),L.value&&n.modelValue?w(e.$slots,"active-icon",{key:2}):L.value?f("",!0):y((a(),q(x(K),{key:3,class:"active-icon",color:"primary",name:"chevron-up"},null,512)),[[p,n.modelValue]])],64)):f("",!0)],8,Z),n.items&&n.items.length>0?y((a(),r("div",{key:0,ref_key:"dropdownRef",ref:c,class:"dropdown-list"},[M("ul",null,[(a(!0),r(C,null,X(n.items,(s,l)=>(a(),r("li",{key:`item-i${l}`,class:b(["list-item",{selected:g.value===l}]),onClick:D(()=>O(s,l),["prevent","stop"])},Y(s.key),11,_))),128))])],512)),[[p,n.modelValue]]):(a(),r(C,{key:1},[N.value?y((a(),r("div",{key:0,ref_key:"dropdownRef",ref:c,class:"dropdown-list"},[w(e.$slots,"content")],512)),[[p,n.modelValue]]):f("",!0)],64))],2))}});export{te as _};

import{d as g,A as E,j as S,m as T,o as a,c as s,e as r,u as c,b as f,_ as Z,t as $,s as _,q,v as N,P as u,k as h,i as I,O as j,B as L,w as v}from"./index-e7347527.js";import{_ as A,f as P}from"./CErrorMessage.vue_vue_type_script_setup_true_lang-7df33b07.js";const V=["onClick","onDrop","onDragover","onDragleave"],J={key:0,class:"progression-bar-wrapper"},R={key:1,class:"content"},H={class:"icon-container"},M={key:0,class:"filename c-mt-15"},O=["accept"],G=g({__name:"CFileUploadZone",props:{maxSize:{type:Number,required:!1,default:2*1024},validFileExtensions:{type:Array,required:!1,default:()=>["application/pdf","image/jpeg","image/png","image/jpg"]},showFilename:{type:Boolean,required:!1,default:!1}},emits:["uploaded"],setup(i,{emit:p}){const t=i,d=E(null),e=S({draggingover:!1,isLoading:!1}),y=T(()=>t.validFileExtensions.join(","));function C(){d.value&&d.value.getElementsByTagName("input")[0].click()}function w(o){return o.size>t.maxSize*1024}function x(o){return t.validFileExtensions.includes(o.type)}function k(){return t.validFileExtensions.map(n=>n.split("/")[1]).join(", ")}async function D(o){if(!x(o))throw Error(h.global.t("translate.common.errors.file_type_error",{types:k()}));if(w(o))throw Error(h.global.t("translate.common.errors.file_size_error_alt",{size:t.maxSize}))}async function m(o){try{e.isLoading=!0,e.error=void 0,e.currentFile=void 0;const n=P.convertJpegToJpg(o);await D(n),e.isLoading=!1,e.currentFile=n,p("uploaded",n)}catch(n){e.error={message:n.message},e.isLoading=!1}}async function U(o){const n=o.target;n.files&&n.files.length>0&&await m(n.files[0])}async function b(o){var l;e.draggingover=!1;const n=(l=o.dataTransfer)==null?void 0:l.files;!n||n.length===0||await m(n[0])}function z(){e.draggingover=!0}function B(){e.draggingover=!1}return(o,n)=>{var l;return a(),s("div",{ref_key:"cFileUploadZoneRef",ref:d,class:N(["c-file-upload-zone",{dragging:e.draggingover}]),draggabl:!0,onClick:u(C,["stop"]),onDrop:u(b,["prevent","stop"]),onDragover:u(z,["prevent","stop"]),onDragleave:u(B,["prevent","stop"])},[e.isLoading?(a(),s("div",J,[r(c(K))])):(a(),s("div",R,[f("div",H,[r(c(Z),{width:50,height:50,color:"#92929D",name:"upload"})]),i.showFilename?(a(),s("div",M,$((l=e.currentFile)==null?void 0:l.name),1)):_("",!0),e.error?(a(),q(c(A),{key:1,error:e.error},null,8,["error"])):_("",!0)])),f("input",{name:"fileUploadZoneInput",type:"file",accept:y.value,onChange:U},null,40,O)],42,V)}}}),F=I(G,[["__scopeId","data-v-08532b89"]]),K=g({__name:"CSpinner",props:{width:{type:Number,required:!1,default:80},height:{type:Number,required:!1,default:80}},setup(i){return(p,t)=>(a(),s("div",{class:"c-spinner",style:j({width:`${i.width}px`,height:`${i.height}px`})},null,4))}}),Q=f("h3",null,"Basique utilisation",-1),W=f("h3",null,"showFilename flag",-1),X=`
  <CFileUploadZone />
`,Y=`
  <CFileUploadZone :show-filename="true" />
`,oe=g({__name:"FileUploadZonePage",setup(i){function p(t){}return(t,d)=>{const e=L("CCodeSnippet");return a(),s("div",null,[Q,r(e,{snippet:X},{default:v(()=>[r(c(F),{onUploaded:p})]),_:1}),W,r(e,{snippet:Y},{default:v(()=>[r(c(F),{"show-filename":!0})]),_:1})])}}});export{oe as default};
